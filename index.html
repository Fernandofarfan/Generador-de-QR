<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de QR</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>
    <button id="darkModeToggle" class="mode-toggle">üåô</button>
    <button id="installApp" class="install-btn" style="display: none;">üì≤ Instalar App</button>

    <div class="main-container">
        <div class="card editor-card">
            <h1>Generador de QR</h1>
            
            <div class="tabs">
                <button class="tab-btn active" data-target="url">üîó Link</button>
                <button class="tab-btn" data-target="wifi">üì∂ WiFi</button>
                <button class="tab-btn" data-target="text">üìù Texto</button>
                <button class="tab-btn" data-target="vcard">üë§ Contacto</button>
                <button class="tab-btn scan-mode-btn" data-target="scan">üì∑ Escanear</button>
            </div>

            <div id="formsContainer">
                
                <div class="form-section active" id="form-url">
                    <div class="input-group">
                        <label>Tu Enlace (URL)</label>
                        <input type="text" id="urlInput" placeholder="https://mi-sitio-web.com" autocomplete="off">
                    </div>
                </div>

                <!-- WiFi Form -->
                <div class="form-section" id="form-wifi">
                    <div class="input-group">
                        <label>Nombre de Red (SSID)</label>
                        <input type="text" id="wifiSSID" placeholder="Ej: MiCasa_5G">
                    </div>
                    <div class="input-group">
                        <label>Contrase√±a</label>
                        <input type="password" id="wifiPass" placeholder="Contrase√±a del WiFi">
                    </div>
                    <div class="input-group">
                        <label>Seguridad</label>
                        <select id="wifiType">
                            <option value="WPA">WPA/WPA2</option>
                            <option value="WEP">WEP</option>
                            <option value="nopass">Sin Contrase√±a</option>
                        </select>
                    </div>
                </div>

                <!-- Texto Form -->
                <div class="form-section" id="form-text">
                    <div class="input-group">
                        <label>Mensaje de Texto</label>
                        <textarea id="textInput" rows="4" placeholder="Escribe lo que quieras..."></textarea>
                    </div>
                </div>

                <!-- VCard Form -->
                <div class="form-section" id="form-vcard">
                    <div class="grid-2">
                        <div class="input-group">
                            <label>Nombre</label>
                            <input type="text" id="vcardName" placeholder="Juan">
                        </div>
                        <div class="input-group">
                            <label>Apellido</label>
                            <input type="text" id="vcardLastname" placeholder="P√©rez">
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Tel√©fono</label>
                        <input type="tel" id="vcardPhone" placeholder="+54 9 11 1234 5678">
                    </div>
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="vcardEmail" placeholder="juan@email.com">
                    </div>
                </div>

                <!-- Scanner Section (New) -->
                <div class="form-section" id="form-scan">
                     <div id="reader"></div>
                     <p id="scanResult" class="scan-result">Esperando c√≥digo...</p>
                     <button id="copyScanBtn" style="display:none;" class="btn secondary">Copiar Resultado</button>
                </div>

            </div>

            <!-- Personalizaci√≥n Visual (Solo visible si no es scan) -->
            <div id="designSection">
                <hr class="divider">
                <h3>üé® Dise√±o</h3>

                <div class="options-grid">
                    <div class="option-item">
                        <label>Forma Puntos</label>
                        <select id="dotsType">
                            <option value="square">Cuadrados (Cl√°sico)</option>
                            <option value="rounded">Redondeados</option>
                            <option value="dots">Puntitos</option>
                            <option value="classy">Elegante</option>
                            <option value="extra-rounded">Muy Redondo</option>
                        </select>
                    </div>
                    <div class="option-item">
                        <label>Forma Esquinas</label>
                        <select id="cornersType">
                            <option value="square">Cuadradas</option>
                            <option value="dot">Punto</option>
                            <option value="extra-rounded">Redondeadas</option>
                        </select>
                    </div>
                    <div class="option-item">
                        <label>Color Puntos</label>
                        <input type="color" id="dotsColor" value="#000000">
                    </div>
                    <div class="option-item">
                        <label>Color Fondo</label>
                        <input type="color" id="bgColor" value="#ffffff">
                    </div>
                    <div class="option-item full-width">
                        <label>Logo (Opcional)</label>
                        <input type="file" id="logoInput" accept="image/*">
                    </div>
                </div>

                <div class="actions">
                    <button id="generateBtn" class="btn primary">Generar QR</button>
                </div>
            </div>
        </div>

        <div class="card preview-card">
            <div id="qrcode"></div>
            
            <div class="download-section">
                <select id="downloadFormat" class="format-select">
                    <option value="png">PNG</option>
                    <option value="jpeg">JPEG</option>
                    <option value="svg">SVG</option>
                    <option value="webp">WEBP</option>
                </select>
                <button id="downloadBtn" class="btn secondary" disabled>‚¨á Descargar</button>
            </div>
        </div>
    </div>

    <!-- Secci√≥n de Historial -->
    <div class="history-container">
        <h3>Historial Reciente</h3>
        <ul id="historyList"></ul>
        <button id="clearHistory" class="text-btn">Borrar historial</button>
    </div>

    <script src="script.js"></script>
</body>
</html>