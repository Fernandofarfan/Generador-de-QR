<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de QR</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <script type="text/javascript" src="lib/qr-code-styling.js"></script>
    <script src="lib/html5-qrcode.js" type="text/javascript"></script>
</head>
<body>
    <button id="darkModeToggle" class="mode-toggle">üåô</button>
    <button id="installApp" class="install-btn" style="display: none;">üì≤ Instalar App</button>

    <div class="main-container">
        <div class="card editor-card">
            <h1>Generador de QR</h1>
            
            <div class="tabs">
                <button class="tab-btn active" data-target="url">üîó Link</button>
                <button class="tab-btn" data-target="wifi">üì∂ WiFi</button>
                <button class="tab-btn" data-target="text">üìù Texto</button>
                <button class="tab-btn" data-target="vcard">üë§ Contacto</button>
                <button class="tab-btn" data-target="whatsapp">üí¨ WhatsApp</button>
                <button class="tab-btn" data-target="email">üìß Email</button>
                <button class="tab-btn" data-target="event">üìÖ Evento</button>
                <button class="tab-btn scan-mode-btn" data-target="scan">üì∑ Escanear</button>
            </div>

            <div id="formsContainer">
                
                <!-- Auto Generate Toggle -->
                <div class="auto-gen-wrapper">
                    <label class="switch">
                        <input type="checkbox" id="autoGenToggle">
                        <span class="slider round"></span>
                    </label>
                    <span class="label-text">‚ö° Generar Autom√°ticamente</span>
                </div>

                <div class="form-section active" id="form-url">
                    <div class="input-group">
                        <label>Tu Enlace (URL)</label>
                        <input type="text" id="urlInput" placeholder="https://mi-sitio-web.com" autocomplete="off">
                    </div>
                </div>

                <!-- WiFi Form -->
                <div class="form-section" id="form-wifi">
                    <div class="input-group">
                        <label>Nombre de Red (SSID)</label>
                        <input type="text" id="wifiSSID" placeholder="Ej: MiCasa_5G">
                    </div>
                    <div class="input-group">
                        <label>Contrase√±a</label>
                        <input type="password" id="wifiPass" placeholder="Contrase√±a del WiFi">
                    </div>
                    <div class="input-group">
                        <label>Seguridad</label>
                        <select id="wifiType">
                            <option value="WPA">WPA/WPA2</option>
                            <option value="WEP">WEP</option>
                            <option value="nopass">Sin Contrase√±a</option>
                        </select>
                    </div>
                </div>

                <!-- Texto Form -->
                <div class="form-section" id="form-text">
                    <div class="input-group">
                        <label>Mensaje de Texto</label>
                        <textarea id="textInput" rows="4" placeholder="Escribe lo que quieras..."></textarea>
                    </div>
                </div>

                <!-- VCard Form -->
                <div class="form-section" id="form-vcard">
                    <div class="grid-2">
                        <div class="input-group">
                            <label>Nombre</label>
                            <input type="text" id="vcardName" placeholder="Juan">
                        </div>
                        <div class="input-group">
                            <label>Apellido</label>
                            <input type="text" id="vcardLastname" placeholder="P√©rez">
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Tel√©fono</label>
                        <input type="tel" id="vcardPhone" placeholder="+54 9 11 1234 5678">
                    </div>
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="vcardEmail" placeholder="juan@email.com">
                    </div>
                </div>

                <!-- WhatsApp Form -->
                <div class="form-section" id="form-whatsapp">
                    <div class="input-group">
                        <label>N√∫mero (con c√≥digo de pa√≠s)</label>
                        <input type="tel" id="waPhone" placeholder="Ej: 5491112345678">
                        <small>Sin espacios ni s√≠mbolos (+).</small>
                    </div>
                    <div class="input-group">
                        <label>Mensaje</label>
                        <textarea id="waMessage" rows="2" placeholder="Hola, me interesa tu producto..."></textarea>
                    </div>
                </div>

                <!-- Email Form -->
                <div class="form-section" id="form-email">
                    <div class="input-group">
                        <label>Para (Email)</label>
                        <input type="email" id="emailTo" placeholder="contacto@empresa.com">
                    </div>
                    <div class="input-group">
                        <label>Asunto</label>
                        <input type="text" id="emailSub" placeholder="Consulta importante">
                    </div>
                    <div class="input-group">
                        <label>Mensaje</label>
                        <textarea id="emailBody" rows="4" placeholder="Escribe aqu√≠..."></textarea>
                    </div>
                </div>

                <!-- Event Form -->
                <div class="form-section" id="form-event">
                    <div class="input-group">
                        <label>T√≠tulo del Evento</label>
                        <input type="text" id="eventTitle" placeholder="Fiesta de Cumplea√±os">
                    </div>
                    <div class="input-group">
                        <label>Ubicaci√≥n</label>
                        <input type="text" id="eventLoc" placeholder="Av. Siempre Viva 123">
                    </div>
                    <div class="grid-2">
                        <div class="input-group">
                            <label>Inicio</label>
                            <input type="datetime-local" id="eventStart">
                        </div>
                        <div class="input-group">
                            <label>Fin</label>
                            <input type="datetime-local" id="eventEnd">
                        </div>
                    </div>
                </div>

                <!-- Scanner Section (New) -->
                <div class="form-section" id="form-scan">
                     <div id="reader"></div>
                     <p id="scanResult" class="scan-result">Esperando c√≥digo...</p>
                     <button id="copyScanBtn" style="display:none;" class="btn secondary">Copiar Resultado</button>
                </div>

            </div>

            <!-- Personalizaci√≥n Visual (Solo visible si no es scan) -->
            <div id="designSection">
                <hr class="divider">
                <h3>üé® Dise√±o</h3>

                <div class="options-grid">
                    <div class="option-item">
                        <label>Forma Puntos</label>
                        <select id="dotsType">
                            <option value="square">Cuadrados (Cl√°sico)</option>
                            <option value="rounded">Redondeados</option>
                            <option value="dots">Puntitos</option>
                            <option value="classy">Elegante</option>
                            <option value="extra-rounded">Muy Redondo</option>
                        </select>
                    </div>
                    <div class="option-item">
                        <label>Forma Esquinas</label>
                        <select id="cornersType">
                            <option value="square">Cuadradas</option>
                            <option value="dot">Punto</option>
                            <option value="extra-rounded">Redondeadas</option>
                        </select>
                    </div>
                    <div class="option-item">
                        <label>Color Puntos</label>
                        <input type="color" id="dotsColor" value="#000000">
                    </div>

                    <!-- Gradient Options -->
                     <div class="option-item full-width" style="margin-top: 10px;">
                        <label style="display:inline-flex; align-items:center; gap:8px;">
                            <input type="checkbox" id="useGradient"> üåà Usar Degradado Premium
                        </label>
                     </div>
                     
                     <div id="gradientSection" class="options-grid full-width hidden">
                        <div class="option-item">
                            <label>Tipo</label>
                            <select id="gradientType">
                                <option value="linear">Lineal</option>
                                <option value="radial">Radial</option>
                            </select>
                        </div>
                        <div class="option-item">
                            <label>Color 2</label>
                            <input type="color" id="gradientColor2" value="#3b82f6">
                        </div>
                        <div class="option-item">
                            <label>Rotaci√≥n (¬∞)</label>
                            <input type="number" id="gradientRotation" value="45" min="0" max="360">
                        </div>
                     </div>

                    <div class="option-item">
                        <label>Color Fondo</label>
                        <input type="color" id="bgColor" value="#ffffff">
                    </div>
                    <div class="option-item">
                        <label>Correcci√≥n de Error</label>
                        <select id="errorLevel">
                            <option value="L">Bajo (7%)</option>
                            <option value="M" selected>Medio (15%)</option>
                            <option value="Q">Alto (25%)</option>
                            <option value="H">M√°ximo (30%)</option>
                        </select>
                    </div>
                    <div class="option-item full-width">
                        <label>Logo (Opcional)</label>
                        <input type="file" id="logoInput" accept="image/*">
                    </div>
                </div>

                <div class="actions">
                    <button id="generateBtn" class="btn primary">Generar QR</button>
                </div>
            </div>
        </div>

        <div class="card preview-card">
            <div id="qrcode"></div>
            
            <div class="download-section">
                <select id="downloadFormat" class="format-select">
                    <option value="png">PNG</option>
                    <option value="jpeg">JPEG</option>
                    <option value="svg">SVG</option>
                    <option value="webp">WEBP</option>
                </select>
                <div class="btn-group-horizontal">
                    <button id="downloadBtn" class="btn success" disabled>‚¨á Descargar</button>
                    <button id="shareBtn" class="btn secondary" disabled>üîó Compartir</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Secci√≥n de Historial -->
    <div class="history-container">
        <h3>Historial Reciente</h3>
        <ul id="historyList"></ul>
        <button id="clearHistory" class="text-btn">Borrar historial</button>
    </div>

    <script src="script.js"></script>
</body>
</html>